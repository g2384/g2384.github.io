<html>
<script>
function dec2bin(num) {
	return parseInt(num, 10).toString(2);
}

function gen(){
var lv=Number(document.getElementById('lv').value);
var hv=Number(document.getElementById('hv').value);
var n=Number(document.getElementById('n').value);
var inp=Number(document.getElementById('inp').value);
max=Math.pow(2,n)-1;

re=roundto((inp/max)*(hv-lv)+lv,2);
console.log(max,inp, n, lv, hv, re)
document.getElementById('result').innerHTML=re;
}

function gen_a2d(){
var lv=Number(document.getElementById('lv').value);
var hv=Number(document.getElementById('hv').value);
var n=Number(document.getElementById('n').value);
var inp_a=Number(document.getElementById('inp_a').value);

max=Math.pow(2,n)-1;

re=roundto((inp_a-lv)/(hv-lv)*max,2);
console.log(max,inp, n, lv, hv, re);
re_rounded=Math.round(re);
bin=dec2bin(re_rounded);
s='Dec: '+re+'<br>Bin: '+bin +'(Converted from '+re_rounded +')<br>';
re_rounded_2=re_rounded+1;
s+='Note: <br>'+re_rounded_2+'(Dec) = '+dec2bin(re_rounded_2)+'(Bin)<br>';
re_rounded_2=re_rounded-1;
s+=re_rounded_2+'(Dec) = '+dec2bin(re_rounded_2)+'(Bin)';
document.getElementById('result').innerHTML=s;
}
function roundto(x, n){
var k=Math.pow(10,n)
return Math.round(x * k) / k;
}
</script>


Lowest Voltage: <input type='text' id='lv' value='0.4'/> V <br>
Highest Voltage: <input type='text' id='hv' value='1.4'/> V <br>
Number of digital bits:  <input type='text' id='n' value='8'/> <br>
Given Input digital number:  <input type='text' id='inp' value='8'/> 
<form style='display:inline-block;'>
<input type="radio" name="format" value="Dec" checked> Dec
<input type="radio" name="format" value="Hex"> Hex
<input type="radio" name="format" value="Bin"> Bin
</form>
<input type='button' value='Calculate Analogue Output' onclick='gen();'/><br>
Known Output Analogue voltage:  <input type='text' id='inp_a' value='1.3077'/> 
<input type='button' value='Calculate Digital Input' onclick='gen_a2d();'/><br>
<div id='result'></div>
</html>
